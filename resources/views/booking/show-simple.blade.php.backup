@extends('layouts.public-booking')

@section('title', 'Booking #' . $booking->booking_code . ' - Rumah BUMN Telkom Pekalongan')
@section('description', 'Detail booking ruangan ' . $booking->room->name)

@section('content')
/* Simple inline styles for booking show page */
body {
    background-color: #f8f9fa;
    font-family: 'Inter', sans-serif;
}

.booking-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.page-header {
    background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
    color: white;
    padding: 40px 20px;
    margin: -20px -20px 30px -20px;
    border-radius: 0 0 16px 16px;
}

.breadcrumb {
    margin-bottom: 20px;
    font-size: 14px;
}

.breadcrumb a {
    color: #cbd5e1;
    text-decoration: none;
    margin-right: 8px;
}

.breadcrumb a:hover {
    color: white;
}

.page-title {
    font-size: 2rem;
    font-weight: 700;
    margin: 0;
}

.page-subtitle {
    color: #cbd5e1;
    margin: 8px 0 0 0;
}

.booking-grid {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 30px;
    margin-top: 30px;
}

.status-card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    height: fit-content;
    overflow: hidden;
}

.status-header {
    background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
    color: white;
    padding: 30px;
    display: flex;
    align-items: center;
    gap: 20px;
}

.status-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.status-icon.pending {
    background: #f59e0b;
}

.status-icon.confirmed {
    background: #10b981;
}

.status-icon.cancelled {
    background: #ef4444;
}

.status-icon.completed {
    background: #6366f1;
}

.status-info h3 {
    font-size: 1.5rem;
    margin: 0 0 8px 0;
}

.status-code {
    font-family: monospace;
    opacity: 0.8;
    margin: 0 0 10px 0;
}

.status-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
}

.status-badge.pending {
    background: rgba(245, 158, 11, 0.2);
    color: #f59e0b;
}

.status-badge.confirmed {
    background: rgba(16, 185, 129, 0.2);
    color: #10b981;
}

.status-badge.cancelled {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
}

.status-badge.completed {
    background: rgba(99, 102, 241, 0.2);
    color: #6366f1;
}

.status-body {
    padding: 30px;
}

.status-message h4 {
    color: #1e293b;
    margin: 0 0 12px 0;
}

.status-message p {
    color: #64748b;
    line-height: 1.6;
    margin: 0 0 20px 0;
}

.next-steps {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 16px;
    margin-top: 20px;
}

.next-steps h5 {
    color: #475569;
    font-size: 14px;
    margin: 0 0 12px 0;
}

.next-steps ul {
    margin: 0;
    padding-left: 20px;
}

.next-steps li {
    color: #64748b;
    margin-bottom: 4px;
}

.info-card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    overflow: hidden;
}

.card-header {
    background: #f8fafc;
    border-bottom: 1px solid #e2e8f0;
    padding: 24px;
}

.card-header h3 {
    color: #1e293b;
    margin: 0;
    font-size: 1.25rem;
}

.info-section {
    padding: 24px;
    border-bottom: 1px solid #f1f5f9;
}

.info-section:last-child {
    border-bottom: none;
}

.section-title {
    color: #334155;
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0 0 16px 0;
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
}

.info-item {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 16px;
}

.info-label {
    color: #64748b;
    font-size: 14px;
    font-weight: 500;
    margin: 0 0 4px 0;
}

.info-value {
    color: #1e293b;
    font-weight: 600;
    margin: 0;
}

.room-card {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 20px;
    display: flex;
    gap: 16px;
    align-items: center;
}

.room-icon {
    width: 60px;
    height: 60px;
    background: #6366f1;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    flex-shrink: 0;
}

.room-details h5 {
    color: #1e293b;
    margin: 0 0 8px 0;
    font-size: 1.1rem;
}

.room-capacity {
    color: #64748b;
    margin: 0;
}

.action-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 30px;
}

.btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 16px 24px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-download {
    background: #10b981;
    color: white;
}

.btn-download:hover {
    background: #059669;
    color: white;
    text-decoration: none;
    transform: translateY(-1px);
}

.btn-new {
    background: #6366f1;
    color: white;
}

.btn-new:hover {
    background: #4f46e5;
    color: white;
    text-decoration: none;
    transform: translateY(-1px);
}

.help-card {
    background: white;
    border-radius: 8px;
    padding: 20px;
    margin-top: 20px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.help-card h4 {
    color: #1e293b;
    margin: 0 0 12px 0;
}

.help-card p {
    color: #64748b;
    margin: 0 0 16px 0;
}

.contact-links a {
    display: block;
    color: #6366f1;
    text-decoration: none;
    margin-bottom: 8px;
}

.contact-links a:hover {
    text-decoration: underline;
}

/* Responsive */
@media (max-width: 768px) {
    .booking-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .action-buttons {
        grid-template-columns: 1fr;
    }
    
    .info-grid {
        grid-template-columns: 1fr;
    }
    
    .room-card {
        flex-direction: column;
        text-align: center;
    }
    
    .page-title {
        font-size: 1.5rem;
    }
}
</style>

<div class="booking-container">
    <!-- Page Header -->
    <div class="page-header">
        <nav class="breadcrumb">
            <a href="{{ url('/') }}">üè† Beranda</a> ‚Ä∫ 
            <a href="{{ route('booking.index') }}">Booking Ruangan</a> ‚Ä∫ 
            <span style="color: #fbbf24;">{{ $booking->booking_code }}</span>
        </nav>
        
        <h1 class="page-title">Booking #{{ $booking->booking_code }}</h1>
        <p class="page-subtitle">{{ $booking->room->name }} ‚Ä¢ {{ $booking->formatted_date }} ‚Ä¢ {{ $booking->formatted_time }}</p>
    </div>

    <div class="booking-grid">
        <!-- Status Card -->
        <div class="status-card">
            <div class="status-header">
                <div class="status-icon {{ $booking->status }}">
                    @if($booking->status === 'pending')
                        ‚è≥
                    @elseif($booking->status === 'confirmed')
                        ‚úÖ
                    @elseif($booking->status === 'cancelled')
                        ‚ùå
                    @else
                        üéâ
                    @endif
                </div>
                <div class="status-info">
                    <h3>{{ $booking->status_label }}</h3>
                    <p class="status-code">{{ $booking->booking_code }}</p>
                    <span class="status-badge {{ $booking->status }}">
                        @if($booking->status === 'pending') MENUNGGU KONFIRMASI
                        @elseif($booking->status === 'confirmed') DIKONFIRMASI
                        @elseif($booking->status === 'cancelled') DIBATALKAN
                        @else SELESAI
                        @endif
                    </span>
                </div>
            </div>
            
            <div class="status-body">
                <div class="status-message">
                    @if($booking->status === 'pending')
                        <h4>‚è≥ Menunggu Konfirmasi</h4>
                        <p>Booking Anda sedang direview oleh admin. Kami akan mengkonfirmasi dalam 24 jam.</p>
                        <div class="next-steps">
                            <h5>Langkah selanjutnya:</h5>
                            <ul>
                                <li>Tunggu email/SMS konfirmasi dari admin</li>
                                <li>Simpan bukti booking ini sebagai PDF</li>
                                <li>Siapkan dokumen yang diperlukan</li>
                            </ul>
                        </div>
                    @elseif($booking->status === 'confirmed')
                        <h4>‚úÖ Booking Dikonfirmasi!</h4>
                        <p>Booking Anda telah dikonfirmasi. Silakan datang sesuai waktu yang dijadwalkan.</p>
                        @if($booking->confirmed_at)
                            <small style="color: #94a3b8; font-style: italic;">Dikonfirmasi pada: {{ $booking->confirmed_at->format('d M Y H:i') }}</small>
                        @endif
                        <div class="next-steps">
                            <h5>Yang perlu Anda bawa:</h5>
                            <ul>
                                <li>Bukti booking (PDF atau screenshot)</li>
                                <li>Kartu identitas yang valid</li>
                                <li>Datang 10 menit sebelum waktu booking</li>
                            </ul>
                        </div>
                    @elseif($booking->status === 'cancelled')
                        <h4>‚ùå Booking Dibatalkan</h4>
                        <p>Booking ini telah dibatalkan.</p>
                        @if($booking->cancelled_at)
                            <small style="color: #94a3b8; font-style: italic;">Dibatalkan pada: {{ $booking->cancelled_at->format('d M Y H:i') }}</small>
                        @endif
                        <div class="next-steps">
                            <h5>Anda dapat:</h5>
                            <ul>
                                <li>Membuat booking baru dengan waktu berbeda</li>
                                <li>Menghubungi admin untuk informasi lebih lanjut</li>
                            </ul>
                        </div>
                    @else
                        <h4>üéâ Booking Selesai</h4>
                        <p>Terima kasih telah menggunakan fasilitas kami!</p>
                        <div class="next-steps">
                            <h5>Feedback:</h5>
                            <p>Kami sangat menghargai feedback Anda untuk meningkatkan layanan kami.</p>
                        </div>
                    @endif
                </div>
            </div>
        </div>

        <!-- Booking Info -->
        <div class="info-card">
            <div class="card-header">
                <h3>üìã Informasi Booking</h3>
            </div>
            
            <!-- Room Info -->
            <div class="info-section">
                <h4 class="section-title">üè¢ Detail Ruangan</h4>
                <div class="room-card">
                    <div class="room-icon">üè¢</div>
                    <div class="room-details">
                        <h5>{{ $booking->room->name }}</h5>
                        <p class="room-capacity">üë• {{ $booking->room->capacity }} orang</p>
                        @if($booking->room->description)
                            <p style="color: #64748b; font-size: 14px; margin-top: 8px;">{{ $booking->room->description }}</p>
                        @endif
                    </div>
                </div>
            </div>
            
            <!-- Time Info -->
            <div class="info-section">
                <h4 class="section-title">‚è∞ Waktu & Tanggal</h4>
                <div class="info-grid">
                    <div class="info-item">
                        <p class="info-label">üìÖ Tanggal</p>
                        <p class="info-value">{{ $booking->formatted_date }}</p>
                    </div>
                    <div class="info-item">
                        <p class="info-label">üïê Waktu</p>
                        <p class="info-value">{{ $booking->formatted_time }}</p>
                    </div>
                    <div class="info-item">
                        <p class="info-label">‚è±Ô∏è Durasi</p>
                        <p class="info-value">{{ $booking->duration_hours }} jam</p>
                    </div>
                </div>
            </div>
            
            <!-- Contact Info -->
            <div class="info-section">
                <h4 class="section-title">üë§ Informasi Kontak</h4>
                <div class="info-grid">
                    <div class="info-item">
                        <p class="info-label">üë§ Nama Lengkap</p>
                        <p class="info-value">{{ $booking->contact_name }}</p>
                    </div>
                    <div class="info-item">
                        <p class="info-label">üì± No. Telepon</p>
                        <p class="info-value">{{ $booking->contact_phone }}</p>
                    </div>
                    @if($booking->contact_email)
                        <div class="info-item">
                            <p class="info-label">üìß Email</p>
                            <p class="info-value">{{ $booking->contact_email }}</p>
                        </div>
                    @endif
                    @if($booking->organization)
                        <div class="info-item">
                            <p class="info-label">üè¢ Organisasi</p>
                            <p class="info-value">{{ $booking->organization }}</p>
                        </div>
                    @endif
                </div>
            </div>
            
            <!-- Event Info -->
            <div class="info-section">
                <h4 class="section-title">üìù Detail Acara</h4>
                <div class="info-item">
                    <p class="info-label">üéØ Tujuan Penggunaan</p>
                    <p class="info-value">{{ $booking->purpose }}</p>
                </div>
                @if($booking->notes)
                    <div class="info-item" style="margin-top: 16px;">
                        <p class="info-label">üìù Catatan Tambahan</p>
                        <p class="info-value">{{ $booking->notes }}</p>
                    </div>
                @endif
            </div>
        </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="action-buttons">
        <a href="{{ route('booking.download-pdf', $booking) }}" class="btn btn-download" target="_blank">
            üìÑ Download Bukti PDF
        </a>
        <a href="{{ route('booking.index') }}" class="btn btn-new">
            üìÖ Booking Ruangan Lagi
        </a>
    </div>
    
    <!-- Help Card -->
    <div class="help-card">
        <h4>üÜò Perlu Bantuan?</h4>
        <p>Hubungi admin melalui:</p>
        <div class="contact-links">
            <a href="tel:+628123456789">üìû (0285) 123-456</a>
            <a href="mailto:admin@rumahbumn.id">üìß admin@rumahbumn.id</a>
        </div>
    </div>
</div>
@endsection